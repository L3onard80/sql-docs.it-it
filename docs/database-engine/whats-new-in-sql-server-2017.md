---
title: Novità del motore di database di SQL Server 2017 | Microsoft Docs
ms.custom: ''
ms.date: 10/24/2017
ms.prod: sql
ms.reviewer: ''
ms.technology: release-landing
ms.topic: conceptual
ms.assetid: 42f45b23-6509-45e8-8ee7-76a78f99a920
author: rothja
ms.author: jroth
manager: craigg
monikerRange: '>=sql-server-2017||=sqlallproducts-allversions||>=sql-server-linux-2017'
ms.openlocfilehash: 3767929e0c73e757965ea591d76d73572a13c018
ms.sourcegitcommit: 8bc5d85bd157f9cfd52245d23062d150b76066ef
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 03/07/2019
ms.locfileid: "57579752"
---
# <a name="whats-new-in-database-engine---sql-server-2017"></a>Novità del motore di database - SQL Server 2017
[!INCLUDE[tsql-appliesto-ss2017-xxxx-xxxx-xxx-md](../includes/tsql-appliesto-ss2017-xxxx-xxxx-xxx-md.md)]

Questo argomento descrive i miglioramenti apportati al [!INCLUDE[ssdenoversion-md](../includes/ssdenoversion-md.md)] per [!INCLUDE[sssqlv14-md](../includes/sssqlv14-md.md)]. Per altre informazioni su ogni elemento, fare clic sui collegamenti.

> [!NOTE]  
> SQL Server 2017 include anche le funzionalità introdotte nei Service Pack di SQL Server 2016. Per tali elementi, vedere [Novità del motore di database](../database-engine/configure-windows/what-s-new-in-sql-server-2016-database-engine.md).

**Miglioramenti**  

- CLR usa la Sicurezza dall'accesso di codice (CAS, Code Access Security) in .NET Framework, non più supportata come limite di sicurezza. Un assembly CLR creato con `PERMISSION_SET = SAFE` potrebbe essere in grado di accedere alle risorse di sistema esterne, chiamare codice non gestito e acquisire privilegi sysadmin. A partire da [!INCLUDE[sssqlv14-md](../includes/sssqlv14-md.md)], viene introdotta un'opzione `sp_configure` denominata `clr strict security` per migliorare la sicurezza degli assembly CLR. `clr strict security` è abilitata per impostazione predefinita e considera gli assembly CLR `SAFE` e `UNSAFE` come se fossero contrassegnati `EXTERNAL_ACCESS`. È possibile disabilitare l'opzione `clr strict security` per la compatibilità con le versioni precedenti, ma questa operazione è sconsigliata. Microsoft consiglia che tutti gli assembly siano firmati con un certificato o una chiave asimmetrica con un account di accesso corrispondente che disponga dell'autorizzazione `UNSAFE ASSEMBLY` nel database master. Gli assembly CLR possono essere aggiunti a un elenco elementi consentiti come soluzione alternativa per la funzionalità `clr strict security`. [sp_add_trusted_assembly](../relational-databases/system-stored-procedures/sys-sp-add-trusted-assembly-transact-sql.md), [sp_drop_trusted_assembly](../relational-databases/system-stored-procedures/sys-sp-drop-trusted-assembly-transact-sql.md) e [sys.trusted_asssemblies](../relational-databases/system-catalog-views/sys-trusted-assemblies-transact-sql.md) sono aggiunti per supportare l'elenco elementi consentiti di assembly attendibili. Per altre informazioni, vedere [CLR strict security](configure-windows/clr-strict-security.md).  
- È stata introdotta una nuova DMF, [sys.dm_db_log_stats](../relational-databases/system-dynamic-management-views/sys-dm-db-log-stats-transact-sql.md), per esporre attributi a livello di riepilogo e informazioni sui file di log delle transazioni. È utile per il monitoraggio dell'integrità del log delle transazioni.  
- Ricompilazioni degli indici online ripristinabili. La ricompilazione dell'indice online ripristinabile consente di ripristinare un'operazione di ricompilazione dell'indice online dal punto in cui è stata arrestata a causa di un errore, ad esempio un failover in una replica o lo spazio su disco insufficiente. È anche possibile sospendere e riprendere successivamente un'operazione di ricompilazione dell'indice online. Ad esempio, potrebbe essere necessario liberare temporaneamente le risorse di sistema per l'esecuzione di un'attività ad alta priorità o completare la ricompilazione dell'indice in un'altra finestra di manutenzione se le finestre di manutenzione disponibili sono troppo brevi per una tabella di grandi dimensioni. Infine, la ricompilazione dell'indice online ripristinabile non richiede uno spazio di log significativo, consentendo di eseguire il troncamento del log durante l'esecuzione dell'operazione di ricompilazione ripristinabile. Vedere [ALTER INDEX](../t-sql/statements/alter-index-transact-sql.md) e [Linee guida per le operazioni sugli indici online](../relational-databases/indexes/guidelines-for-online-index-operations.md).
- **Opzione IDENTITY_CACHE per ALTER DATABASE SCOPED CONFIGURATION**. Una nuova opzione IDENTITY_CACHE è stato aggiunta all'istruzione T-SQL `ALTER DATABASE SCOPED CONFIGURATION`. Quando questa opzione è impostata su `OFF`, consente al motore di database di evitare gap nei valori delle colonne Identity nel caso in cui un server viene riavviato in modo imprevisto o effettua il failover in un server secondario. Vedere [ALTER DATABASE SCOPED CONFIGURATION](../t-sql/statements/alter-database-scoped-configuration-transact-sql.md).   
-  [!INCLUDE[ssnoversion](../includes/ssnoversion-md.md)] offre ora funzionalità di database di grafi per modellare dati più significativi orientati alle relazioni. È stata inclusa una nuova sintassi [CREATE TABLE](../t-sql/statements/create-table-sql-graph.md) per la creazione di tabelle nodi e archi e la parola chiave [MATCH](../t-sql/queries/match-sql-graph.md) per le query. Per altre informazioni, vedere [Graph Processing with SQL Server 2017](../relational-databases/graphs/sql-graph-overview.md) (Elaborazione di grafi con SQL Server 2017).   
- Una nuova generazione di miglioramenti di elaborazione delle query che adatterà le strategie di ottimizzazione alle condizioni di runtime del carico di lavoro dell'applicazione. Per questa prima versione della famiglia di funzionalità di **elaborazione di query adattive**, sono disponibili tre nuovi miglioramenti: **join adattivi in modalità batch**, **feedback delle concessioni di memoria in modalità batch** ed **esecuzione interleaved** per le funzioni con valori di tabella a istruzioni multiple.  Vedere [Elaborazione di query intelligenti nei database SQL](../relational-databases/performance/intelligent-query-processing.md).
- L'ottimizzazione automatica è una funzionalità di database che offre informazioni su potenziali problemi di prestazioni delle query, suggerisce soluzioni e corregge automaticamente i problemi rilevati. L'ottimizzazione automatica in [!INCLUDE[ssnoversion](../includes/ssnoversion-md.md)] invia una notifica ogni volta che viene rilevato un potenziale problema di prestazioni e consente di applicare azioni correttive o consente al [!INCLUDE[ssde-md](../includes/ssde-md.md)] di correggere automaticamente i problemi di prestazioni. Per altre informazioni, vedere [Ottimizzazione automatica](../relational-databases/automatic-tuning/automatic-tuning.md).
- PERFORMANCE ENHANCEMENT FOR NON CLUSTERED INDEX BUILD ON MEMORY-OPTIMIZED TABLES. Le prestazioni di ricompilazione dell'indice bwtree (non cluster) per le tabelle MEMORY_OPTIMIZED durante il recupero del database sono state notevolmente ottimizzate. Questo miglioramento riduce in modo significativo il tempo di recupero del database quando vengono usati gli indici non cluster.  
- [sys.dm_os_sys_info](../relational-databases/system-dynamic-management-views/sys-dm-os-sys-info-transact-sql.md) include tre nuove colonne: socket_count cores_per_socket, numa_node_count. Ciò è utile quando si esegue il server in una macchina virtuale, perché un eccesso di NUMA può causare l'overcommit degli host con conseguenti problemi di prestazioni.
- Una nuova colonna modified_extent_page_count\, è stata introdotta in [sys.dm_db_file_space_usage](../relational-databases/system-dynamic-management-views/sys-dm-db-file-space-usage-transact-sql.md) per tenere traccia delle modifiche differenziali in ogni file del database. La nuova colonna modified_extent_page_count consente di creare soluzioni di backup intelligente eseguendo un backup differenziale se la percentuale di pagine modificate nel database è inferiore a una determinata soglia, pari ad esempio al 70-80%, altrimenti eseguendo un backup completo del database.
- SELECT INTO ... ON FileGroup - [SELECT INTO](../t-sql/queries/select-into-clause-transact-sql.md) supporta ora il caricamento di una tabella in un filegroup diverso da quello predefinito dell'utente usando la parola chiave **ON** aggiunta nella sintassi SELECT INTO TSQL.
- Miglioramenti all'installazione di tempdb: il programma di installazione consente di specificare dimensioni del file tempdb iniziali massime di **256 GB (262.144 MB)** per singolo file con un messaggio di avviso ai clienti se le dimensioni del file vengono impostate su un valore maggiore di 1 GB e se l'inizializzazione immediata dei file non è abilitata. È importante comprendere le implicazioni che derivano dalla scelta di non abilitare l'inizializzazione immediata dei file dove il tempo di installazione può aumentare in modo esponenziale a seconda delle dimensioni iniziali del file di dati tempdb specificato. L'inizializzazione immediata dei file non è applicabile alle dimensioni del log delle transazioni, pertanto se si specifica un valore più grande del log delle transazioni è possibile inevitabilmente che aumenti il tempo di installazione per l'avvio di tempdb durante l'installazione indipendentemente dall'impostazione dell'inizializzazione immediata dei file per l'account del servizio SQL Server.
- È stata introdotta una nuova DMV [sys.dm_tran_version_store_space_usage](../relational-databases/system-dynamic-management-views/sys-dm-tran-version-store-space-usage.md) per tenere traccia dell'utilizzo dell'archivio versioni per ogni database. Questa nuova DMV è utile per monitorare tempdb per l'utilizzo dell'archivio versioni per pianificare in modo proattivo le dimensioni di tempdb in base all'utilizzo dell'archivio versioni per ogni database senza ripercussioni sulle prestazioni o sovraccarichi di esecuzione nei server di produzione.
- Una nuova DMF [sys.dm_db_log_info](../relational-databases/system-dynamic-management-views/sys-dm-db-log-info-transact-sql.md) è stata introdotta per esporre le informazioni VLF simili a DBCC LOGINFO per monitorare, segnalare ed evitare potenziali problemi dei log delle transazioni causati dal numero di VLF, dalle dimensioni del VLF o dai problemi di shrinkfile riscontrati dai clienti.
- Miglioramento delle prestazioni di backup per database di piccole dimensioni in server di fascia alta: per l'esecuzione del backup dei database in SQL Server sono necessarie più iterazioni del pool di buffer per svuotare le operazioni di I/O in corso. Di conseguenza, il tempo di esecuzione del backup non è solo in funzione alle dimensioni del database, ma anche in funzione della dimensioni del pool di buffer attivo. In SQL Server 2017, il backup è stato ottimizzato per evitare più iterazioni del pool di buffer comportando un significativo miglioramento delle prestazioni di backup per i database di piccole e medie dimensioni. Il miglioramento delle prestazioni si riduce con l'aumentare delle dimensioni del database e delle pagine di cui eseguire il backup e l'IO di backup richiede più tempo rispetto allo scorrimento del pool di buffer.  
- Query Store ora tiene traccia delle informazioni di riepilogo delle statistiche attesa. Tenere traccia delle categorie di statistiche di attesa per ogni query in Query Store consente di ottenere una risoluzione ottimale dei problemi di prestazioni, fornendo informazioni ancora più approfondite sulle prestazioni del carico di lavoro e i relativi colli di bottiglia mantenendo al contempo i vantaggi principali di Query Store.  
- Le tabelle temporali con controllo delle versioni di sistema supportano ora CASCADE DELETE e CASCADE UPDATE.  
- Sono state migliorate le prestazioni dei checkpoint indiretti.
- È stato aggiunto il supporto per i gruppi di disponibilità senza cluster.
- È stata aggiunta l'impostazione relativa ai gruppi di disponibilità che consente di definire il numero minimo di repliche necessarie per il commit.
- I gruppi di disponibilità sono ora supportati negli ambienti Windows e Linux per consentire le migrazioni e i test tra i diversi sistemi operativi.
- È stato aggiunto il supporto per i criteri di conservazione delle tabelle temporali.
- È stata introdotta la nuova vista a gestione dinamica SYS.DM_DB_STATS_HISTOGRAM.
- È stato aggiunto il supporto per la compilazione e la ricompilazione degli indici online columnstore non cluster.
- È stata aggiunta[sys.dm_db_stats_histogram (Transact-SQL)](../relational-databases/system-dynamic-management-views/sys-dm-db-stats-histogram-transact-sql.md) per l'analisi delle statistiche.
- L'ottimizzazione guidata di database (DTA) rilasciata con SQL Server Management Studio versione 16.4, per l'analisi di SQL Server 2016 e versioni successive, include alcune opzioni aggiuntive.    
   - Prestazioni migliorate. Per altre informazioni, vedere [Performance Improvements using Database Engine Tuning Advisor (DTA) recommendations](../relational-databases/performance/performance-improvements-using-dta-recommendations.md)(Miglioramenti delle prestazioni mediante le indicazioni dell'ottimizzazione guidata di database).
   - Opzione `-fc` per abilitare le indicazioni relative agli indici columnstore. Per altre informazioni, vedere [Utilità dta](../tools/dta/dta-utility.md) e [Columnstore index recommendations in Database Engine Tuning Advisor (DTA)](../relational-databases/performance/columnstore-index-recommendations-in-database-engine-tuning-advisor-dta.md)(Indicazioni relative agli indici columnstore nell'ottimizzazione guidata di database).  
   - Opzione `-iq` per consentire all'ottimizzazione guidata di database di esaminare un carico di lavoro dell'archivio query. Per altre informazioni, vedere [Tuning Database Using Workload from Query Store](../relational-databases/performance/tuning-database-using-workload-from-query-store.md)(Ottimizzazione del database tramite un carico di lavoro dell'archivio query).  
- Per la funzionalità in memoria, sono disponibili altri miglioramenti alle tabelle ottimizzate per la memoria e alle funzioni compilate in modo nativo. Per esempi di codice che illustrano questi miglioramenti, vedere [Ottimizzare l'elaborazione JSON con OLTP in memoria](../relational-databases/json/optimize-json-processing-with-in-memory-oltp.md).
    - Supporto per le colonne calcolate in tabelle con ottimizzazione per la memoria, inclusi gli indici in colonne calcolate.
    - Supporto completo per le funzioni JSON in moduli compilati in modo nativo e in vincoli CHECK.  
    - Operatore`CROSS APPLY` in moduli compilati in modo nativo.   
- Sono state aggiunte nuove funzioni per i valori stringa [CONCAT_WS](../t-sql/functions/concat-ws-transact-sql.md), [TRANSLATE](../t-sql/functions/translate-transact-sql.md)e [TRIM](../t-sql/functions/trim-transact-sql.md) .   
- La clausola `WITHIN GROUP` è ora supportata per la funzione [STRING_AGG](../t-sql/functions/string-agg-transact-sql.md) .
- Sono state aggiunte due nuove famiglie di regole di confronto per il giapponese (Japanese_Bushu_Kakusu_140 e Japanese_XJIS_140) ed è stata introdotta l'opzione per la distinzione tra selettori di variazione (_VSS) per l'uso in queste nuove regole di confronto per il giapponese. Tutte le nuove regole di confronto, poi, supportano automaticamente i caratteri supplementari senza necessità di specificare l'opzione _SC. Per altre informazioni dettagliate, vedere [Regole di confronto e supporto Unicode](../relational-databases/collations/collation-and-unicode-support.md)   
- Nuove opzioni di accesso in blocco ([BULK INSERT](../t-sql/statements/bulk-insert-transact-sql.md) e [OPENROWSET(BULK...)](../t-sql/functions/openrowset-transact-sql.md)) consentono l'accesso ai dati direttamente da un file specificato con estensione csv e da file archiviati in Archiviazione BLOB di Azure tramite la nuova opzione `BLOB_STORAGE` di [EXTERNAL DATA SOURCE](../t-sql/statements/create-external-data-source-transact-sql.md).
- È stato aggiunto il database **COMPATIBILITY_LEVEL** 140.   I clienti che eseguono in questo livello otterranno le funzionalità più recenti del linguaggio e i comportamenti di Query Optimizer. Sono incluse le modifiche apportate a ogni versione non definitiva di Microsoft.
- Sono stati apportati miglioramenti alla modalità di calcolo delle soglie di aggiornamento delle statistiche incrementali. È richiesta la modalità di compatibilità 140.
- È stato aggiunto[sys.dm_exec_query_statistics_xml](../relational-databases/system-dynamic-management-views/sys-dm-exec-query-statistics-xml-transact-sql.md) .
- Sono stati apportati diversi miglioramenti alle prestazioni e al linguaggio per gli oggetti ottimizzati per la memoria:
    - `sp_spaceused` è supportato ora per le tabelle ottimizzate per la memoria.
    - `sp_rename` è supportato ora per le tabelle con ottimizzazione per la memoria e per i moduli T-SQL compilati in modo nativo.
    - Le espressioni `CASE` sono supportate ora per i moduli T-SQL compilati in modo nativo.
    - È stato eliminato il limite di 8 indici per le tabelle ottimizzate per la memoria.
    - `TOP (N) WITH TIES` è supportato ora per i moduli T-SQL compilati in modo nativo.
    - `ALTER TABLE` è ora in genere notevolmente più veloce rispetto alle tabelle ottimizzate per la memoria.
    - Il rollforward del log delle transazioni delle tabelle ottimizzate per la memoria viene eseguito ora in parallelo. In questo modo si ottengono tempi di recupero più rapidi e si aumenta in modo significativo la velocità effettiva sostenibile di configurazione del gruppo di disponibilità AlwaysOn.
    - I file dei filegroup ottimizzati per la memoria possono ora essere archiviati nell'Archiviazione di Azure. Inoltre nell'Archiviazione di Azure è ora disponibile anche il backup/ripristino dei file ottimizzati per la memoria.
- Gli indici Clustered Columnstore supportano ora le colonne LOB (nvarchar(max), varchar(max), varbinary(max)).
- È stata aggiunta la funzione di aggregazione [STRING_AGG](../t-sql/functions/string-agg-transact-sql.md) .  
- Nuove autorizzazioni: `DATABASE SCOPED CREDENTIAL` è ora una classe di autorizzazioni `CONTROL`, `ALTER`, `REFERENCES`, `TAKE OWNERSHIP`e `VIEW DEFINITION` a protezione diretta di supporto. `ADMINISTER DATABASE BULK OPERATIONS`, limitato al database SQL, è ora visibile in `sys.fn_builtin_permissions`.   
- Sono state aggiunte le viste a gestione dinamica [sys.dm_os_host_info](../relational-databases/system-dynamic-management-views/sys-dm-os-host-info-transact-sql.md) per fornire informazioni sul sistema operativo per Windows e Linux.   
- I ruoli del database vengono creati con R Services per la gestione delle autorizzazioni associate ai pacchetti. Per altre informazioni, vedere [R Package management for SQL Server](../advanced-analytics/r-services/r-package-management-for-sql-server-r-services.md) (Gestione dei pacchetti R per SQL Server).

